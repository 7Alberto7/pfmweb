{% extends "MIWIntranetBundle:Default:base.html.twig" %}

{% block commonup%}

<ul class="breadcrumb" style="margin-bottom: 5px;">
    <li><a href="{{path('intranet_home')}}">WePlay</a></li>
    <li class="active">Mis Partidos</li>
</ul>

{% endblock%}
{% block sidecontent %}

<div class="row margin-top-20">
    <div class="col-xs-12">
        <img class="img-responsive img-thumbnail" src="{{ asset('bundles/miwintranet/images/default-user-photo.png') }}" alt="Nombre de usuario"/>
        <ul class="nav nav-pills nav-stacked">
            <li>
                <a href="{{path('intranet_myprofile_info')}}">Mis Datos</a>
            </li>
            <li>
                <a href="{{path('intranet_myprofile_sports')}}">Mis Deportes</a>
            </li>
            <li class="active">
                <a href="{{path('intranet_myprofile_games')}}">Mis Partidos</a>
            </li>
            <li>
                <a href="{{path('intranet_myprofile_messages')}}">
                    <span class="badge pull-right">0</span>
                    Mis Mensajes
                </a>
            </li>
        </ul>
    </div>
</div>
{% endblock %}

{% block maincontent %}
<div class="row margin-top-20">
    <div class="col-xs-12">
        {% if ownerGames | length > 0 or playingGames | length > 0 or playedGames | length > 0 %}
        <div class="bs-component">
            {% if ownerGames | length > 0%}
            <h3>partidos organizados</h3>
            <div class="list-group">
                  {% for game in ownerGames |slice(0,3) %}
                <a href="{{path('intranet_games_show',{'id':game.id})}}" class="list-group-item">
                    <div class="date">
                        <h4 class="list-group-item-heading">{{ game.gameDate | date('d/m')}} </h4>
                        <h4 class="list-group-item-heading">{{ game.gameDate | date('H:i')}} </h4>
                        <h4 class="list-group-item-heading">{{ game.price}} € </h4>
                    </div>
                    <div class="details">
                        {% if date('now') > game.gameDate %}
                        <span class="label label-danger">Finalizado</span>
                       {% else %}
                            {% if game.players | length == game.numPlayers%}
                        <span class="label label-warning">Completo</span>
                             {% else %}
                        <span class="label label-success">Organizandose</span>
                            {% endif%}
                       {% endif%}
                        <h3 class="list-group-item-heading">{{game.sport.name}}</h3>
                        <p> {% if game.center is defined and game.center is not null%} {{game.center.name}} - {{game.center.address.address}} - {{game.center.address.city}} ({{game.center.address.province}}) {% endif%}</p>
                      
                    </div>
                    <div class="actions pull-right">
                        <span class="badge">{{game.players | length + 1}}  / {{game.numPlayers}}</span>
                        <span class="badge"> Creado el día {{game.created | date('d/m/y H:i')}}</span>
                    </div>
                    <div class="clearfix"></div>
                </a>
                  {% endfor%}
                <a href="{{path('intranet_myprofile_games_owner')}}" class="btn btn-success pull-right">ver todos</a>
            </div>
            {% endif%}

            {% if playingGames | length > 0%}
            <h3>partidos por jugar</h3>
            <div class="list-group">
                  {% for game in playingGames %}
                <a href="{{path('intranet_games_show',{'id':game.id})}}" class="list-group-item">
                    <h4 class="list-group-item-heading">{{ game.gameDate | date('d/m/y h:i')}} </h4>
                    <h3 class="list-group-item-heading">{{game.sport.name}}</h3>
                    <span class="label label-danger">Finalizado</span>

                    <span class="badge">{{game.players | length + 1}}  / {{game.numPlayers}}</span>


                </a>
                  {% endfor%}
                <a href="{{path('intranet_myprofile_games_playing')}}" class="btn btn-success pull-right">ver todos</a>
            </div>
            {% endif%}

            {% if playedGames | length >0 %}
            <h3>partidos jugados</h3>
            <div class="list-group">
                  {% for game in playedGames | slice(0,3) %}
                <a href="{{path('intranet_games_show',{'id':game.id})}}" class="list-group-item">
                    <h4 class="list-group-item-heading">{{ game.gameDate | date('d/m/y h:i')}} </h4>
                    <h3 class="list-group-item-heading">{{game.sport.name}}</h3>
                    <span class="label label-danger">Finalizado</span>
                    <p class="list-group-item-text">{{game.description}}</p>
                </a>
                  {% endfor%}
                <a href="{{path('intranet_myprofile_games_played')}}" class="btn btn-success pull-right">ver todos</a>
            </div>
            {% endif%}
        </div>
        {% else%}
        <h2>Todavía no te has inscrito ni creado ningún partido</h2>
        <p>Comienza a disfrutar de las ventajas de WePlay organizando un partido o buscando partidos que se adecúen a tus preferencias</p>
        {% endif%}
    </div>



{% endblock %}
{% block commondown%}
{% endblock %}
{% block javascripts%}
{% endblock%}

